# 道路及连接

## 环境

- win11
- TESSNG-V2.1.0

## 测试路网

本测试创建了**道路及连接**模块所需的所有路网元素用于后续进行单一测试验证，包括：

### 被测元素（在该模块做测试）

- 7个路段
- 6个连接段

- 1个测试车型
- 1个测试车型组成
- 1个发车点：默认车型组成；测试车型组成
- 2个限速区：在连接段上；在路段上
- 3对行程检测器：上游连接段-下游路段；上游路段-下游路段；上游连接段-下游连接段
- 2个排队计数器：在连接段上；在路段上
- 2个数据采集器：在连接段上；在路段上
- 2个测试相位
- 6个相位颜色
- 1个测试信号灯组
- 2个信号灯：在路段上；在连接段上
- 1个发车点
- 1个决策点
- 2个决策路径
- 1个公交站点
- 2个公交线路

  公交线路的路段或连接段序列：不可直接界面操作，设置之后只能删除公交路线才能更改删除。

  公交站点-线路：点击公交站点可编辑，本次测试公交站点与2个公交路线都有关系

  乘客到站：每个公交站点-线路的关系都有多个乘客到站的记录，本次测试每对公交站点-线路关系设置了1个乘客到站记录

> 测试结论为对原测试路网另存，并在TESSNG界面操作，对以上元素进行单一删除，观察另存数据库对比原数据库各表的变化所得

## 单一验证

### 车型

#### 状态

已验证，结论正确

#### 注意

> 胡工说：暂时无需考虑删除车型之后，对车型组成的车型组成与车型占比，限速区的限速车型进行修改



### 车型组成

#### 状态

已验证，结论正确



### 发车点

#### 状态

已验证，结论正确



### 限速区

#### 状态

已验证，结论正确



### 行程检测器

#### 状态

已验证，结论正确



### 排队计数器

#### 状态

已验证，结论正确



### 数据采集器

#### 状态

已验证，结论正确



### 相位颜色

#### 状态

已验证，结论正确



### 相位

#### 状态

已验证，结论正确

#### 注意

> 删除相位应删除signalPhaseID == 指定相位ID的信号灯记录



### 信号灯组

#### 状态

已验证，结论正确

#### 注意

> 删除信号灯组，应删除在这个信号灯组内所有相位关联的信号灯的记录



### 信号灯

#### 状态

已验证，结论正确



### 公交站点

#### 状态

已验证，结论正确

#### 注意

> 删除公交站点将导致公交站点-线路关系的破碎，因此要删除相关记录，详见pdf

### 公交线路

#### 状态

已验证，结论正确

#### 注意

> 删除公交线路将导致公交站点-线路关系的破碎，因此要删除相关记录，详见pdf

### 公交站点-线路

#### 状态

已验证，结论正确

### 乘客到站

#### 状态

已验证，结论正确



### 路段

#### 状态

等待验证



### 连接段

#### 状态

等待验证



## 全量保存细节BUG

### 崩溃

- 当只有一个信号灯组，删除信号灯组的所有相位后，设置信号灯，程序会崩

### 更新

- 更新信号灯颜色信息，点击取消，颜色编辑和信号灯组编辑都点取消，实际信号灯的颜色信息已经改掉，显示的也是改掉的信息，仿真时也是改掉的
- 更新信号灯颜色信息后，需要在关联的信号灯处进入编辑窗口点击一下才会刷新
- 删除相位或整个信号灯组之后，关联的信号灯仍按照之前的相位信息进行仿真，在重新打开后信号灯消失，但数据库仍存在关联的信号灯，此时再次保存，则信号灯数据从数据库消失
